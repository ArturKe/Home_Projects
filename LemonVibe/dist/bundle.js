(()=>{"use strict";class e{constructor(e){this.target=document.querySelector(e)}show(){console.log("Show"),this.target.classList.add("show")}hide(){console.log("hide"),this.target.classList.remove("show")}}console.log("Hello");const t=new e(".game_body__menu"),o=new class extends e{constructor(e){super(e),this.counterInit=0,this.counterLose=0,this.gameStart=!1,this.width=300}start(){console.log("Starting");let e=setInterval((()=>{window.requestAnimationFrame(this.initDraw.bind(this))}),1200),t=setInterval((()=>{window.requestAnimationFrame(this.updateCoordinate.bind(this)),this.gameStart||(console.log("Stop Update Coordinate gameStrat is: "+this.gameStart),clearInterval(t),clearInterval(e))}),20)}cleanScreen(){document.querySelector(".game_body__main").innerHTML="",console.log("Clean Screen")}updateCoordinate(){document.querySelectorAll(".lemon").forEach((e=>{let t=e.style.top,o=+e.style.left.slice(0,-2),s=+t.slice(0,-2);if(s+=1,e.style.top=`${s}px`,s>260){let t=+document.querySelector(".basket").style.left.slice(0,-2);o>=t&&o<=t+60&&(this.counterInit++,this.counterUpdate(this.counterInit),document.querySelector(".game_body__main").removeChild(e)),s>300&&(document.querySelector(".game_body__main").removeChild(e),this.counterLose++,console.log("Loose "+this.counterLose))}}))}counterUpdate(e){document.querySelector(".game_body__counter").innerHTML=`Lemons: ${e}`}initDraw(){let e=Math.floor(249*Math.random()+1);document.querySelector(".game_body__main").innerHTML+=`<div class="lemon" data="${this.counterInit}" style="left:${e}px; top: 0px">lemon</div>`,console.log("Spawn Lemon")}initBasket(){document.querySelector(".game_body__middle").innerHTML+='<div class="basket" data="basket" style="left:100px; bottom: 40px"></div>',this.basketBindEvents(),this.basketBindTouchEvents()}deleteBasket(){let e=document.querySelector(".basket");e&&document.querySelector(".game_body__middle").removeChild(e)}basketBindEvents(){let e=!1,t={startX:0,startOffsetX:0,curentPosX:0},o=document.querySelector(".basket");o.addEventListener("mousedown",(s=>{e=!0,t.startX=s.clientX,t.startOffsetX=s.layerX,t.curentPosX=+o.style.left.slice(0,-2)})),o.addEventListener("mouseup",(()=>{e=!1})),o.addEventListener("mousemove",(o=>{e&&this.basketMove(!1,t,o)}))}basketBindTouchEvents(){let e=!1,t={startX:0,startOffsetX:0,curentPosX:0},o=document.querySelector(".basket");o.addEventListener("touchstart",(s=>{e=!0,t.startX=Math.floor(s.touches[0].clientX),console.log(t.startX),t.startOffsetX=10,t.curentPosX=+o.style.left.slice(0,-2)})),o.addEventListener("touchend",(()=>{e=!1,console.log("touch end")})),o.addEventListener("touchmove",(o=>{e&&this.basketMove(!0,t,o)}))}basketMove(e,t,o){let s,n=document.querySelector(".basket");e&&(s=Math.floor(o.touches[0].clientX)),e||(s=o.clientX);let a=t.curentPosX+s-t.startX;a<0?a=0:a>240&&(a=240),n.style.left=`${a}px`}continueGame(){this.gameStart=!0,this.counterUpdate(this.counterInit),this.start(),console.log("Continue Game "+this.gameStart)}pauseGame(){console.log("Pause "+this.gameStart),this.gameStart=!1,console.log("Pause "+this.gameStart)}restartGame(){this.deleteBasket(),this.cleanScreen(),this.gameStart=!0,this.counterInit=0,this.counterUpdate(this.counterInit),this.initDraw(),this.initBasket(),this.start(),console.log("Restart Game")}}(".game_body__middle");t.hide(),o.restartGame()})();